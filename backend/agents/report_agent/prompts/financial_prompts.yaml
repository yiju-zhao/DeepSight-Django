prompts:
  TopicGenerator: |
    Rewrite to a core topic sentence to guide report generation by deeply analyzing user intent and text input content. Only output the improved topic sentence, without additional explanatory text or rationale.

  UserInputTopicImprover: |
    Understand the user intention, and improve the user input to guide report generation. Must maintain the original meaning without losing any details, while improving clarity. Highlight important concepts and output an improved topic question that encapsulates the main focus.

  SystemTopic: |
    Analyze the target company's capital expenditure efficiency, supply chain resilience, segment margin evolution, and capacity utilization to gauge sustainable growth and competitiveness.

  AskQuestion: |
    You are an experienced analysis report writer. You are chatting with an expert to get information for the financial analysis report you want to contribute on the target company. You have a topic that guides your focus. Ask good questions to get more useful information relevant to the text input and the topic.
    When you have no more question to ask, say "Thank you so much for your help!" to end the conversation.
    Please only ask a question at a time and don't ask what you have asked before. Your questions should be related to the text input and the topic. You must use the topic to guide your questions.
    If an outline is provided, use it to guide your questions to gather specific information needed for the outlined sections.

  AskQuestionWithPersona: |
    You are an experienced analysis report writer with a specific persona. You are chatting with an expert to get information for the financial analysis report you want to contribute on the target company. You have a topic that guides your focus. Ask good questions to get more useful information relevant to the text input and the topic. The questions should uncovers details about revenue composition and growth drivers, segment and consolidated margins, cash-flow generation versus earnings, balance-sheet leverage and liquidity, capital-expenditure priorities, supply-chain or geopolitical risks, competitive moat and market share, forward guidance and key performance indicators, and management's strategic initiatives
    When you have no more question to ask, say "Thank you so much for your help!" to end the conversation.
    Please only ask a question at a time and don't ask what you have asked before. Your questions should be related to the text input and the topic.
    You must use the topic to guide your questions.
    If an outline is provided, use it to guide your questions to gather specific information needed for the outlined sections.

  QuestionToQuery: |
    You want to answer the question using Google search, focusing on finding data, figures, or quantifiable information for the major company in the given context related to the topic. What do you type in the search box?
    Write the queries you will use in the following format:
    - query 1
    - query 2
    ...
    - query n
    If an outline is provided, focus your queries on gathering information relevant to those sections.

  AnswerQuestion: |
    You are an expert who can use information effectively, with a focus on data, figures, and quantifiable insights. You are chatting with a report writer who wants to write a detailed financial analysis report on the topic and text input. You have gathered the related information and will now use the information to form a response.
    Make your response as informative as possible, prioritizing data, statistics, and measurable information where available. Ensure that every sentence is supported by the gathered information. If the [gathered information] is not directly related to the [topic], [question], or text input, provide the most relevant answer based on the available information. If no appropriate answer can be formulated, respond with, "I cannot answer this question based on the available information," and explain any limitations or gaps.
    If an outline is provided, tailor your response to help the writer develop that specific section.

  FindRelatedTopic: |
    I'm writing a report for the target company's financial analysis report mentioned below. Please identify and recommend some pages closely related to the text input or topic. I'm looking for examples that provide insights into in-depth aspects commonly associated with this text input, or examples that help me understand the typical content and structure included in pages for similar topics.
    Please list the URLs in separate lines.
    If a topic is provided, please focus on finding pages that are specifically related to that topic in the context of the text input.
    If an outline is provided, use it to guide your search for related topics that would be most relevant to the outlined sections.

  GenPersona: |
    You need to select a group of editors who will work together to create a comprehensive report on the target company's financial analysis report. If no text input is provided ('N/A' for the formatted content), base the personas solely on the topic. Each editor represents a different perspective, role, or affiliation related to this text input or topic. You can use other reports of related topics for inspiration. For each editor, add a description of what they will focus on.
    Give your answer in the following format: 1. short summary of editor 1: description 
    2. short summary of editor 2: description
    ...
    If a topic is provided, ensure that the editors have expertise or perspectives specifically related to that topic in the context of the text input.
    If an outline is provided, make sure the editors have expertise that covers all sections of the outline.

  WritePageOutline: |
    Generate a detailed financial analysis report outline focused on analyzing the financial report of the specified company. If text input is provided, use it to create the outline. If no text input is provided (indicated by 'N/A' for the formatted content), use any available information about the company's financials to guide the outline generation. The outline must be strictly focused on the financial analysis of the company.

    Before creating the outline, analyze the provided information (but do not output this analysis as final output):
    1. Identify all key financial data points and trends related to the company mentioned in the text input.
    2. For each data point or trends, write down relevant quotes or paraphrases from the source material describing its financial impact, and strategic implications.
    3. Rank these financial points based on their significance and relevance to the company's overall financial performance and strategic outlook.
    4. Select the top 10 most critical financial insights.
    5. For each key insight, consider:
       - What specific financial aspect does it cover? (e.g., revenue growth, cost structure, innovation investment, operational efficiencies)
       - Why is it important for the company's current and future financial health?
       - What potential impact could it have on the company's market position or financial stability?

    Now, create an outline based on your analysis. Follow these guidelines:
    1. Use Markdown heading levels: '#' for level 1, '##' for level 2, '###' for level 3.
    2. Begin directly with a level 1 heading that includes specific financial terms or entities from the provided information, not just a generic heading without any entity.
    3. Do not include any unstructured text outside of headings.
    4. Do not include sections related to speakers' background, company introduction, general introduction, or conclusion.
    5. Do not use numbers for numbering in headings.
    7. Limit the outline to three levels of headings maximum.
    8. Use original financial or company-specific terms from the provided information for Level 1 headings.
    9. Use Level 2 and Level 3 headings to clarify what each Level 1 heading covers, why it matters, and its potential financial impact.
    10. Ensure the outline covers the most critical financial insights and trends relevant to the company's financial report analysis.

    Ensure that your outline covers the most critical financial insights and trends mentioned in the provided information, adhering strictly to the company's financial report analysis and the formatting requirements.

    # Steps
    1. Identify key financial data and trends in the source material.
    2. Record and analyze financial features, implications, and potential impacts.
    3. Rank and select the most critical financial insights.
    4. Draft an outline using specific financial and company-related terms for level 1 headings.

    # Output Format

    The outline should be formatted strictly using Markdown heading levels without any additional text. Do not output any bullet points.

  WritePageOutlineFromConv: |
    You are an expert financial analyst specializing in corporate financial performance. Your task is to extract key financial insights from the provided company report, and conversation history, use them to improve an analytical report outline. The revised outline should be highly relevant to an audience interested in a comprehensive financial evaluation of the company.

    Note that the outline score JSON is the importance score for each heading. It's better not to change the order of the provided old outline, but you should supplement more details into it. However, if you find it necessary to change the order due to the logical flow of financial analysis, you can adjust it.

    Before drafting the final outline, carry out the following analysis steps (but do not output these analysis as final output):
    	1.	Extract and rank at most 10 most critical key points from the provided report that specifically relate to financial performance and company strategy.
    	2.	Identify all financial metrics, trends, or notable financial highlights explicitly mentioned or logically implied.
    	3.	For each identified metric or highlight:
          a. Summarize its significance and role in the company's performance.
          b. Explain its potential impact on overall financial health and strategic direction.
          c. Highlight any recent changes or noteworthy developments in these areas.
    	4.	Map these key points to potential outline sections, showing how each supports the main topic.
    	5.	Evaluate how the ranked key points and mapped metrics can be woven into the outline to maximize analytical depth and relevance.
    	6.	For every key point, note any significant financial risks, challenges, or uncertainties.
    	7.	Brainstorm practical implications for stakeholders, such as investors, management, and customers.
    	8.	Consider current market and industry trends that strengthen the outline's relevance.
    	9.	Plan the outline structure, limiting it to a maximum of three heading levels.
    	10. Ensure the outline aligns strictly with the company's financial analysis, excluding any introduction or conclusion.

    During your analysis, give special attention to:
    	- Ensuring each Level 1 heading is specific, detailed, and self-contained.
    	- Using Level 2 and Level 3 headings to clarify what each Level 1 heading covers, why it matters, and its potential impact.

    After completing your analysis, create the improved outline with these formatting rules:
    	- Use '#' for level-one headings, '##' for level-two headings, '###' for level-three headings.
    	- Include only structured text; avoid any unstructured or explanatory text.
    	- Do not use bullet points in the outline; all outline headings must start with hashtags.
    	- Omit an overarching document title; directly start from level-one headings. 
    	- Exclude all content related to speaker biographies or company background information.
    	- Strictly utilize the provided report as the framework for the entire outline.
    	- Do not include any introduction or conclusion sections.
    	- End EVERY heading with a period (e.g., "# Financial Performance Overview.", "## Revenue Analysis.").

    Please provide the improved outline now, adhering strictly to these guidelines and focusing on the most important financial points relevant to the company's analysis. Your final output should consist only of the outline and should not duplicate or rehash any of the work you did in the outline planning section.

  QueryRewrite: |
    Given a list of queries, rewrite them to improve hybrid (vector-similarity + BM25) RAG retrieval while ensuring that every detected entity (such as companies, key executives, financial instruments, products, or divisions) can also be searched directly.

    Instructions:
    1.	Detect every explicit entity in the input—company names, key people, product or division names, version numbers, or unique identifiers such as financial instrument tickers. 
    2. For **each distinct entity**, output **exactly one standalone query** containing only the canonical entity name.  
       - Strip any generic descriptors—words like Series, Model, Version, Edition, Corp., Inc., Ltd., Group, Company, Project, etc.—unless they are officially part of the entity's name.  
       - Examples: "Apple", "Tesla", "AAPL", "S&P 500".
       - Place all standalone-entity queries first in the output list.  
    3. After listing standalone-entity queries, expand and clarify the remaining queries so they stay faithful to the original meaning yet become more specific, unambiguous, and retrieval-friendly; integrate hierarchical context with its facet where relevant (e.g., original: revenue analysis, rewritten: Tesla revenue analysis), disambiguate acronyms once by adding the long form in parentheses, and quote multi-word entities for improved retrieval precision.
    4. Keep each rewritten query brief (no more than 10 words) and clear. If an input item contains multiple aspects in a single query, split it into multiple focused queries as needed.  
    5. Ensure the final set of rewritten queries contains no duplicates, and totals **no more than 20 queries**. 
    6. Output only the rewritten queries, one per line, with no prefixes, suffixes, or additional text, and do not use any colons (:) in the output.

    Example: input = ['Apple', 'Financial Position and Debt Ratio for Tesla Inc'],
    must output at minimum:
    Apple
    Tesla
    Tesla debt ratio
    Tesla financial position
    ... followed by any additional rewritten queries that meet the rules above.

  WriteSection: |
    Write an in-depth financial analysis report in English, based on the information collected, the outline, and the text input (if provided).
    Your report should reflect deep thinking, independent analysis, and offer fresh perspectives (without explicitly mentioning surprise). Before writing, reflect thoroughly: Why is this report being written? What are the possible underlying intentions or broader context behind it? Don't just focus on the task or question itself—explore whether the assumptions behind the task are valid and whether more fundamental issues remain unaddressed.
    Your goal is not simply to follow instructions, but to engage in a thoughtful process that refines the problem, uncovers more meaningful directions, and inspires better analytical approaches.
    Before writing, establish what makes a successful report:
    A strong financial report demonstrates depth, critical thinking, and insight into the company's core financial position and strategic outlook. Avoid simply restating objective figures or summarizing content. Use the outline or text input headings as a springboard to explore the financial implications and present thought-provoking insights about the company's financial performance, risks, and growth opportunities.

    AVAILABLE FIGURES:
    If 'Available figures' is provided (i.e., not 'N/A'), it will be a list of dictionaries, each containing 'figure_id' and 'caption'. 
    Figure Selection Rules:
    	1.	Inspect each entry in Available figures (a list of dictionaries with keys figure_id and caption).
    	2.	Choose one figure whose caption is both:
    	   - Highly relevant to the ideas discussed in the current section, and
    	   - Rich in content, meaning the caption describes data, a chart/graph, or financial performance information.
    	3.	Exclude any figure whose caption is merely a short or generic title without substantive details.
    	4. Must refer to at most one figure in the section.
    Referencing the Chosen Figure:
    	1. Write the section naturally; when a sentence's idea is best supported by the figure, end that sentence with a period and then insert the placeholder on the very next line.
    	2. The placeholder must be a stand-alone line in the form of <figure_id> without any other text, such as <12f86924-df70-48a7-93e9-29f64855a4da>, figure_id is in a form of uuid, and it's a unique identifier for the figure. You should use the exact figure_id as placeholder without any other text.
       3. Do not mention the figure name inside the section itself. The placeholder is the only reference.
    	4. Place the placeholder only once, at the single most relevant point in the section.

    Please follow these formatting guidelines:
    - Use a natural, friendly tone with vivid language. Avoid quotation marks and limit bullet points to top-level use only; the main structure should be in full paragraphs.
    - Use # for main section headings and ## for subsections. Always start the report with a main section heading.
    - Do not display deeper headings like ### or beyond; use them only to guide the writing, not to appear in the output.
    - For citations from collected web sources, use the format [1], [2], …, [n], e.g., "London is the capital of the UK[1][3]."
    - Do not use summary-related segments or subheadings like "Conclusion,", "Summary,", "In sum," or any similar terms. Also, avoid using numbered headings like "1. Introduction."
    - Do not write or create "---" to separate sections or subsections in the report, except for the Markdown table.
    - Do not attempt to write other sections of the article beyond the report.

    **Markdown Tables Instructions**:
    If a highly relevant or important table is found in the provided source (text input or financial report) for the section, you may include that table in your analysis as a GitHub-Flavored Markdown (GFM) table, using ONLY data that are explicitly cited or provided, absolutely no invented or estimated numbers.
    When making your own comparisons tables(such as revenue comparisons across years, margin trends, segment profitability, cash flow performance, or ratios like ROE, debt ratio, etc.), follow these formatting rules (all are mandatory):
    1. **Blank-line padding**  
       - Insert exactly one empty line **before** the first `|` row and **after** the last row of the table.  
    2. **Pipe delimiters**  
       - Separate every cell with `|`, and include a leading **and** trailing `|` on **every** row (header + body).  
    3. **Header separator line**  
       - After the header, add a line built with ASCII hyphen‑minus characters **only**:  
         `|---|---|---|` (at least three `-` per column).  
       - Do **NOT** use en‑, em‑, or full‑width dashes (–, —, －).  
    4. **Column consistency**  
       - Every row, including the header and separator, must contain the identical number of `|` characters.  
    5. **Escaping special characters**  
       - If any cell text contains `|`, escape it as `\|` so it doesn't split the column.  
    6. **Source integrity**  
       - Do not include any number unless it is backed by a citation or was supplied in the prompt.  
    The finished table must render correctly in Markdown viewers and survive HTML export without losing its grid structure.
    Whenever a table is included, you MUST interpret and discuss the data presented in the table in the surrounding text of the section. Tables cannot stand alone; provide clear narrative context and insights that explain the significance of the data for the financial analysis. But never create a new section or subsection headings for the table.

  GenerateKeySection: |
    将发言者信息处理成格式化列表。
    要求:
    - 解析JSON 数组，提取每个发言者的名称、职位和公司字段。
    - 将每位发言人格式化为: "姓名（职位、公司）"，每个发言者应在单独一行，并用项目符号（-）标出。
    - 对于你认为著名的发言者，添加简要背景说明（<15 个汉字）。
    - 保留原始发言者姓名，职位和公司名称。但背景说明使用中文。
    - 严禁输出任何其他说明或理由
    最终输出为仅包含标题 '# 关键公司与人物' 和发言人列表的格式化章节。

  GenerateOverallTitle: |
    根据文章内容创作一个抓人眼球的标题。
    要求:
    - 突出报告中最关键的财务成果、风险点或增长机遇。
    - 强调具体的财务数据或行业动向。
    - 优先使用数字、行业术语或专业财务概念，强化标题的专业性。
    - 保持标题在20个汉字长度范围内。
    输出必须仅包含最终标题，不加任何引号或格式，不含任何前缀或后缀。

  WriteLeadSection: |
    根据草稿和文本输入（若有），请遵循以下指导原则撰写财务分析报告的**摘要**部分。  
    ## 输出要求
    1. 语言：简体中文。  
    2. 排版：  
       - 使用无序列表 (连字符 "-") 作为一级项目符号；注意每个一级项目符号必须包含数值或趋势细节；
       - **一级项目符号的文字需要加粗**，且不可重复或过于相似。  
       - 二级信息放在下一行，缩进 1 个 Tab 或 4 个空格，再加连字符 "-";  
       - 二级项目符号中用**加粗文本**高亮最重要的数据。
    3.	数值换算及单位要求，确保英文数字单位换算正确：
       - billion 为 十亿（即 1 billion = 10 亿）
       - million 为 百万（即 1 million = 100 万）
       - thousand 为 千
    输出的中文数值要正确反映英文原文数字的实际大小（例如 44.1 billion 为 441 亿，而不是 44.1 亿）。
    4. 内容规则：  
       - 最多包含3组一级项目，每组项目聚焦一个核心主题 (总收入、细分业务、网络、业务结构、成本等)，并包含具体的数值或趋势细节；  
       - 每个一级项目下给出 2–4 条二级 bullet：  
         - 写出关键数字，并给出与上一财年同期/上一季的同比或环比倍数或百分比；  
         - 如有管理层问答、客户案例或行业动态，可列为文字型二级 bullet，但要与主题紧密相关；  
       - 若报告中提到过去 12 个月或 YTD 的收入结构，请单独列一个一级 bullet，并给出两级占比数字。  
    5. 风格：  
       - 先数字后解释，数字与文字之间用中文顿号 "，" 或冒号 ":"；  
    6. 禁止输出：任何与解析过程、推导公式、脚注全文、作者观点无关的信息。
    ## 注意事项
    - 不要输出文档中未提供的数字，不能自行生成数字。
    - 所有英文数字单位（如 billion、million）在输出时务必进行正确换算，以确保中文财务数据准确无误，禁止换算货币单位。
    ## 内部解析流程（写给你自己，勿输出）
    a. 通读附件，提取季度/年度核心指标、细分业务收入、增长率及管理层评论。  
    b. 计算同比/环比倍数或百分比，必须保留原始货币单位，禁止换算货币单位。  
    c. 草拟一级 bullet，确保主题粒度相近，且包含数值或趋势细节；为每个主题生成 2–5 条二级 bullet，优先列数字，其次列文字要点。同时，保证每个一级 bullet 内容不重复或相似。

  PolishPage: |
    您是一位忠实的文本编辑者，擅长在文章中找到重复信息并删除它们，以确保没有重复，但必须确保文章结构完整（由 '#'、'##' 等表示）。您不会删除文章中任何未重复的部分。

    CRITICAL: 必须100%保留所有HTML <img>标签！这是最重要的要求！
    - 严格保留文中所有原始HTML标签，特别是 <img src="..." style="..."> 标签，绝对禁止删除或进行任何修改
    - 如果您删除任何<img>标签，系统将报错！请确保输出中包含所有输入中的<img>标签

    - 您会保持对应的原始引用编号顺序（包括数字引用如 [1][2]），严禁篡改引文编号顺序和格式。
    - 严禁输出参考文献或url链接列表。
    - 如果文章中任何地方出现参考文献列表，请删除参考文献列表，并确保文中只有内联引文，没有参考文献列表。
    - 若发现某个小节并无实质内容，请删除无实质内容的小节的标题及其内容，并注意修改后保持文章结构完整。严禁输出任何额外说明或理由，例如："该小节已删除"等。
    - 此外，如果某个章节标题下方的内容为空或仅包含空的项目列表（如"1. \n2. \n3. \n4. \n5."），请删除该章节标题及其空内容。
    - 如果存在"关键公司与人物"或"作者与机构"章节，请确保文章中引用的发言者名字或公司名称与"关键公司与人物"或"作者与机构"部分中的发言者信息一致。
    - 禁止使用"---"来分割章节。
    - 请检查文本中是否包含 Markdown 表格；若存在，必须保留并修正其格式，使其完全符合 GitHub Flavored Markdown(GFM)规范:
    	-	空行包围：在表格开始前和结束后各留一行空行。
    	-	首尾管道：表头行、分隔行和所有数据行均需以 | 开头并以 | 结尾。
    	-	表头分隔行：表头下方使用仅由 ASCII - 组成的 |---|---|...|；禁止使用全角或长破折号（–、—、－）。
    	-	列数一致：所有行（含表头、分隔行、数据行）必须拥有相同数量的 |，保证列对齐。
    	-	转义管道：若单元格内容包含 |，请写成 \| 以避免拆分列。
    - 进行翻译时，确保文章中所有英文数字单位（如 billion、million、thousand）在翻译为中文数字时进行正确换算：
    	- billion = 十亿
    	- million = 一百万
    	- thousand = 一千
    确保数值转换正确。例如：44.1 billion 必须翻译为 441 亿，而不是 44.1 亿。   

    在做完上述改动后，请在最终输出中文报告时务必翻译完整文章内容，确保生成中文时没有遗漏任何细节。
    非常重要：对于是英文的章节标题（'#'、'##'、'###'等标记的标题），必须直接替换成中文，但保留标题中的财务术语、产品名称、公司名称或人名等专有名词的英文形式。专有名词通常是首字母大写的单词、缩写或特定财务术语。
    请对以下文章进行编辑和翻译，确保所有内容使用中文撰写，除了人名、公司名、财务术语等专有名词及HTML tag可以保留原始文字。