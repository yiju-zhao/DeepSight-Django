/* SessionChatPanel.css */

/* Scope all overrides to the specific ID to ensure specificity */
#deep-sight-chat-panel {
  --chat-font-size: 0.8125rem;
  /* 13px */
  --chat-line-height: 1.5;
  --code-font-size: 0.75rem;
  /* 12px */
}

/* === Base Message Styling === */

#deep-sight-chat-panel .copilotKitMessage {
  font-size: var(--chat-font-size) !important;
  line-height: var(--chat-line-height) !important;
  padding: 0.5rem 0.75rem !important;
  margin-bottom: 0.25rem !important;
  /* Reduced from 0.5rem */
}

/* User Message Bubble */
#deep-sight-chat-panel .copilotKitMessage.copilotKitUserMessage {
  font-size: var(--chat-font-size) !important;
  background-color: #3b82f6 !important;
  color: white !important;
}

/* Assistant Message Bubble */
#deep-sight-chat-panel .copilotKitMessage.copilotKitAssistantMessage {
  font-size: var(--chat-font-size) !important;
  background-color: #f3f4f6 !important;
  padding: 0.5rem 0.75rem !important;
  /* Reset padding to normal */
  margin-bottom: 1.75rem !important;
  /* Increased margin to make room for icons below */
  position: relative !important;
}

/* Position controls OUTSIDE and BELOW the bubble */
#deep-sight-chat-panel .copilotKitMessage.copilotKitAssistantMessage .copilotKitMessageControls {
  position: absolute !important;
  bottom: -22px !important;
  left: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  display: flex !important;
  opacity: 1 !important;
  /* Ensure they are visible if they were hidden by default */
}

/* Reduce the gap between assistant and user messages now that we have larger margin-bottom */
#deep-sight-chat-panel .copilotKitMessage.copilotKitAssistantMessage+.copilotKitMessage.copilotKitUserMessage {
  margin-top: 0.25rem !important;
}


/* === Markdown Content Styling === */

/* Paragraphs */
#deep-sight-chat-panel p.copilotKitMarkdownElement {
  font-size: var(--chat-font-size) !important;
  line-height: var(--chat-line-height) !important;
  margin-bottom: 0.5rem !important;
}

#deep-sight-chat-panel p.copilotKitMarkdownElement:last-child {
  margin-bottom: 0 !important;
  /* Remove bottom margin for last paragraph to reduce inner whitespace */
}

/* Headers */
#deep-sight-chat-panel h1.copilotKitMarkdownElement,
#deep-sight-chat-panel h2.copilotKitMarkdownElement,
#deep-sight-chat-panel h3.copilotKitMarkdownElement,
#deep-sight-chat-panel h4.copilotKitMarkdownElement {
  font-weight: 600 !important;
  margin-top: 0.75rem !important;
  margin-bottom: 0.25rem !important;
  color: #111827 !important;
  /* Gray-900 */
}

#deep-sight-chat-panel h1.copilotKitMarkdownElement {
  font-size: 0.95rem !important;
}

#deep-sight-chat-panel h2.copilotKitMarkdownElement {
  font-size: 0.9rem !important;
}

#deep-sight-chat-panel h3.copilotKitMarkdownElement {
  font-size: 0.85rem !important;
}

#deep-sight-chat-panel h4.copilotKitMarkdownElement {
  font-size: 0.8125rem !important;
}

/* Lists */
#deep-sight-chat-panel ul.copilotKitMarkdownElement,
#deep-sight-chat-panel ol.copilotKitMarkdownElement {
  margin-bottom: 0.5rem !important;
  padding-left: 1.25rem !important;
}

#deep-sight-chat-panel li.copilotKitMarkdownElement {
  margin-bottom: 0.25rem !important;
}

/* Inline Code */
#deep-sight-chat-panel .copilotKitInlineCode {
  font-size: var(--code-font-size) !important;
  padding: 0.1rem 0.3rem !important;
  background-color: rgba(0, 0, 0, 0.05) !important;
  color: #c026d3 !important;
  /* Fuschia-600 */
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
}

/* Code Blocks */
#deep-sight-chat-panel .copilotKitCodeBlock {
  margin: 0.5rem 0 !important;
  border-radius: 0.375rem !important;
}

#deep-sight-chat-panel .copilotKitCodeBlockToolbar {
  padding: 0.25rem 0.75rem !important;
}

#deep-sight-chat-panel .copilotKitCodeBlockToolbarLanguage {
  font-size: 0.7rem !important;
}

/* === Input Area Styling === */

#deep-sight-chat-panel .copilotKitInput {
  padding: 0.75rem !important;
  min-height: 5.5rem !important;
}

#deep-sight-chat-panel .copilotKitInput textarea {
  font-size: var(--chat-font-size) !important;
  line-height: 1.4 !important;
  padding: 0.4rem !important;
  min-height: 3rem !important;
  max-height: min(40vh, 320px) !important;
  /* Keep input from overtaking the viewport */
  resize: none !important;
  overflow-y: auto !important;
  scrollbar-gutter: stable;
  /* Hide scrollbar by default, autosize should handle height */
}

/* Hide the "Powered by CopilotKit" footer */
#deep-sight-chat-panel .poweredByContainer,
#deep-sight-chat-panel .poweredBy {
  display: none !important;
}

/* === Header Styling === */
/* Note: Class name guessed based on component usage, but checked if available in CSS dump */
/* Since header.css was imported but not cat'd, assuming standard class */
#deep-sight-chat-panel .copilotKitHeader {
  font-size: 0.875rem !important;
  /* 14px */
  padding: 0.5rem 1rem !important;
}

/* Hide clutter */
#deep-sight-chat-panel .copilotKitMessage[data-message-role="system"],
#deep-sight-chat-panel .copilotKitMessage[data-message-role="function"],
#deep-sight-chat-panel .copilot-kit-tool-call {
  display: none !important;
}

/* === Control Buttons Customization === */

/* Hide Regenerate Button */
#deep-sight-chat-panel button[aria-label="Regenerate response"],
#deep-sight-chat-panel button[title="Regenerate response"] {
  display: none !important;
}

/* Hide Thumbs Down Button */
#deep-sight-chat-panel button[aria-label="Thumbs down"],
#deep-sight-chat-panel button[title="Thumbs down"] {
  display: none !important;
}

/* Style the "Add to Note" button (repurposed Thumbs Up) */
#deep-sight-chat-panel button[aria-label="Add to Notes"],
#deep-sight-chat-panel button[title="Add to Notes"] {
  color: #6b7280 !important;
  /* Gray-500 */
}

#deep-sight-chat-panel button[aria-label="Add to Notes"]:hover,
#deep-sight-chat-panel button[title="Add to Notes"]:hover {
  /* Blue-500 */
  background-color: transparent !important;
  transform: scale(1.1);
}

/* === Branding Removal === */
#deep-sight-chat-panel .copilotKitBranding,
#deep-sight-chat-panel .copilot-kit-branding,
#deep-sight-chat-panel a[href*="copilotkit.ai"] {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
  height: 0 !important;
  width: 0 !important;
  overflow: hidden !important;
  pointer-events: none !important;
}
